{"ast":null,"code":"var _s = $RefreshSig$();\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\n/* eslint-disable react/no-unstable-nested-components */\nimport React, { useState } from \"react\";\nimport { t } from \"i18next\";\nimport PATH_URL from \"@common/config/pathURL\";\nimport useFetch from \"@common/hooks/useFetch\";\nimport { formatDateTimeTable } from \"@common/utils/dateHelper\";\nimport ComTable from \"@components/common/ComTable\";\nimport { giftCodeApi } from \"@services/apis/giftcode\";\nimport { Button, Tag } from \"antd\";\nimport { useNavigate } from \"react-router-dom\";\nimport FilterDropdown from \"@components/table/PopupFilter\";\nimport { STATUS_GIFT_CODE } from \"@common/constant/masterData\";\nimport dayjs from \"dayjs\";\nfunction GiftCodeList() {\n  _s();\n  var _value$paginate;\n  const navigate = useNavigate();\n  const [pagination, setPagination] = useState({\n    take: 10,\n    page: 1,\n    isUser: null\n  });\n  const {\n    loading,\n    value\n  } = useFetch(ourRequest => {\n    if (!pagination.isUser) delete pagination.isUser;\n    return giftCodeApi.getGiftCodes(pagination, ourRequest);\n  }, [pagination]);\n  const onChangePagination = (currentPage, totalItemPerPage) => {\n    setPagination(curState => ({\n      ...curState,\n      page: currentPage,\n      take: totalItemPerPage\n    }));\n  };\n  const handleCreate = () => {\n    navigate(PATH_URL.GIFT_CODE.CREATE);\n  };\n  const handleEdit = dataGift => {\n    navigate(PATH_URL.GIFT_CODE.EDIT, {\n      state: dataGift\n    });\n  };\n  const checkStatus = users => {\n    if (!(users !== null && users !== void 0 && users.user) && !(users !== null && users !== void 0 && users.expirationDate)) return true;\n    const expirationDateTimestamp = dayjs(users === null || users === void 0 ? void 0 : users.expirationDate).valueOf();\n    const currentTimeTimestamp = dayjs().valueOf();\n    return !(users !== null && users !== void 0 && users.user) && expirationDateTimestamp > currentTimeTimestamp;\n  };\n  const columns = [{\n    title: t(\"managementGiftCode.table.id\"),\n    dataIndex: \"id\",\n    align: \"center\",\n    sorter: (a, b) => a.id - b.id,\n    sortDirections: [\"ascend\"],\n    width: \"80px\"\n  }, {\n    title: t(\"managementGiftCode.table.userId\"),\n    dataIndex: \"userId\",\n    align: \"center\",\n    sorter: (a, b) => a.id - b.id,\n    sortDirections: [\"ascend\"],\n    render: userId => /*#__PURE__*/React.createElement(\"div\", null, userId || \"-\")\n  }, {\n    title: t(\"managementGiftCode.table.code\"),\n    dataIndex: \"code\",\n    align: \"center\"\n  }, {\n    title: t(\"managementGiftCode.table.expirationDate\"),\n    dataIndex: \"expirationDate\",\n    align: \"center\",\n    render: date => /*#__PURE__*/React.createElement(\"div\", null, formatDateTimeTable(date))\n  }, {\n    title: t(\"managementGiftCode.table.createdAt\"),\n    dataIndex: \"createdAt\",\n    align: \"center\",\n    render: date => /*#__PURE__*/React.createElement(\"div\", null, formatDateTimeTable(date))\n  }, {\n    title: t(\"managementGiftCode.table.updatedAt\"),\n    dataIndex: \"updatedAt\",\n    align: \"center\",\n    render: date => /*#__PURE__*/React.createElement(\"div\", null, formatDateTimeTable(date))\n  }, {\n    title: t(\"managementGiftCode.table.infoUser\"),\n    dataIndex: \"user\",\n    align: \"center\",\n    render: user => /*#__PURE__*/React.createElement(\"div\", null, user ? user === null || user === void 0 ? void 0 : user.fullname : \"-\")\n  }, {\n    title: t(\"managementGiftCode.table.status\"),\n    dataIndex: \"\",\n    align: \"center\",\n    filteredValue: pagination.isUser || null,\n    filterDropdown: props => /*#__PURE__*/React.createElement(FilterDropdown, _extends({\n      field: \"isUser\",\n      items: STATUS_GIFT_CODE,\n      onSetPagination: setPagination\n    }, props)),\n    render: users => {\n      return /*#__PURE__*/React.createElement(\"div\", null, checkStatus(users) ? /*#__PURE__*/React.createElement(Tag, {\n        color: \"green\"\n      }, t(\"managementGiftCode.table.neverUse\")) : /*#__PURE__*/React.createElement(Tag, {\n        color: \"red\"\n      }, t(\"managementGiftCode.table.used\")));\n    }\n  }, {\n    title: t(\"managementGiftCode.table.operation\"),\n    align: \"center\",\n    render: dataGift => /*#__PURE__*/React.createElement(Button, {\n      type: \"primary\",\n      onClick: e => {\n        e.stopPropagation();\n        handleEdit(dataGift);\n      }\n    }, t(\"managementGiftCode.table.btnEdit\"))\n  }];\n  const totalPage = value === null || value === void 0 ? void 0 : (_value$paginate = value.paginate) === null || _value$paginate === void 0 ? void 0 : _value$paginate.totalPage;\n  const paginationProp = {\n    position: [\"bottomRight\"],\n    total: totalPage * pagination.take,\n    showSizeChanger: true,\n    onChange: onChangePagination\n  };\n  return /*#__PURE__*/React.createElement(ComTable, {\n    title: t(\"managementGiftCode.listGiftCode\"),\n    columns: columns,\n    loading: loading,\n    pagination: paginationProp,\n    data: (value === null || value === void 0 ? void 0 : value.data) || [],\n    onAddTable: handleCreate\n  });\n}\n_s(GiftCodeList, \"kriOlKT8ZJ5MKm3LzxXQarXCp8s=\", false, function () {\n  return [useNavigate, useFetch];\n});\n_c = GiftCodeList;\nGiftCodeList.propTypes = {};\nexport default GiftCodeList;\nvar _c;\n$RefreshReg$(_c, \"GiftCodeList\");","map":{"version":3,"mappings":"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","names":["React","useState","t","PATH_URL","useFetch","formatDateTimeTable","ComTable","giftCodeApi","Button","Tag","useNavigate","FilterDropdown","STATUS_GIFT_CODE","dayjs","GiftCodeList","navigate","pagination","setPagination","take","page","isUser","loading","value","ourRequest","getGiftCodes","onChangePagination","currentPage","totalItemPerPage","curState","handleCreate","GIFT_CODE","CREATE","handleEdit","dataGift","EDIT","state","checkStatus","users","user","expirationDate","expirationDateTimestamp","valueOf","currentTimeTimestamp","columns","title","dataIndex","align","sorter","a","b","id","sortDirections","width","render","userId","date","fullname","filteredValue","filterDropdown","props","field","items","onSetPagination","color","type","onClick","e","stopPropagation","totalPage","paginate","paginationProp","position","total","showSizeChanger","onChange","data","onAddTable","propTypes"],"sources":["/home/huynd/animalwatch_admin/src/pages/manager/giftcode/GiftCodeList.jsx"],"sourcesContent":["/* eslint-disable react/no-unstable-nested-components */\r\nimport React, { useState } from \"react\";\r\nimport { t } from \"i18next\";\r\n\r\nimport PATH_URL from \"@common/config/pathURL\";\r\nimport useFetch from \"@common/hooks/useFetch\";\r\nimport { formatDateTimeTable } from \"@common/utils/dateHelper\";\r\nimport ComTable from \"@components/common/ComTable\";\r\nimport { giftCodeApi } from \"@services/apis/giftcode\";\r\nimport { Button, Tag } from \"antd\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport FilterDropdown from \"@components/table/PopupFilter\";\r\nimport { STATUS_GIFT_CODE } from \"@common/constant/masterData\";\r\nimport dayjs from \"dayjs\";\r\n\r\nfunction GiftCodeList() {\r\n  const navigate = useNavigate();\r\n  const [pagination, setPagination] = useState({\r\n    take: 10,\r\n    page: 1,\r\n    isUser: null,\r\n  });\r\n\r\n  const { loading, value } = useFetch(\r\n    (ourRequest) => {\r\n      if (!pagination.isUser) delete pagination.isUser;\r\n      return giftCodeApi.getGiftCodes(pagination, ourRequest);\r\n    },\r\n    [pagination],\r\n  );\r\n\r\n  const onChangePagination = (currentPage, totalItemPerPage) => {\r\n    setPagination((curState) => ({\r\n      ...curState,\r\n      page: currentPage,\r\n      take: totalItemPerPage,\r\n    }));\r\n  };\r\n\r\n  const handleCreate = () => {\r\n    navigate(PATH_URL.GIFT_CODE.CREATE);\r\n  };\r\n\r\n  const handleEdit = (dataGift) => {\r\n    navigate(PATH_URL.GIFT_CODE.EDIT, { state: dataGift });\r\n  };\r\n\r\n  const checkStatus = (users) => {\r\n    if (!users?.user && !users?.expirationDate) return true;\r\n    const expirationDateTimestamp = dayjs(users?.expirationDate).valueOf();\r\n    const currentTimeTimestamp = dayjs().valueOf();\r\n    return !users?.user && expirationDateTimestamp > currentTimeTimestamp;\r\n  };\r\n\r\n  const columns = [\r\n    {\r\n      title: t(\"managementGiftCode.table.id\"),\r\n      dataIndex: \"id\",\r\n      align: \"center\",\r\n      sorter: (a, b) => a.id - b.id,\r\n      sortDirections: [\"ascend\"],\r\n      width: \"80px\",\r\n    },\r\n    {\r\n      title: t(\"managementGiftCode.table.userId\"),\r\n      dataIndex: \"userId\",\r\n      align: \"center\",\r\n      sorter: (a, b) => a.id - b.id,\r\n      sortDirections: [\"ascend\"],\r\n      render: (userId) => <div>{userId || \"-\"}</div>,\r\n    },\r\n    {\r\n      title: t(\"managementGiftCode.table.code\"),\r\n      dataIndex: \"code\",\r\n      align: \"center\",\r\n    },\r\n    {\r\n      title: t(\"managementGiftCode.table.expirationDate\"),\r\n      dataIndex: \"expirationDate\",\r\n      align: \"center\",\r\n      render: (date) => <div>{formatDateTimeTable(date)}</div>,\r\n    },\r\n    {\r\n      title: t(\"managementGiftCode.table.createdAt\"),\r\n      dataIndex: \"createdAt\",\r\n      align: \"center\",\r\n      render: (date) => <div>{formatDateTimeTable(date)}</div>,\r\n    },\r\n    {\r\n      title: t(\"managementGiftCode.table.updatedAt\"),\r\n      dataIndex: \"updatedAt\",\r\n      align: \"center\",\r\n      render: (date) => <div>{formatDateTimeTable(date)}</div>,\r\n    },\r\n    {\r\n      title: t(\"managementGiftCode.table.infoUser\"),\r\n      dataIndex: \"user\",\r\n      align: \"center\",\r\n      render: (user) => <div>{user ? user?.fullname : \"-\"}</div>,\r\n    },\r\n    {\r\n      title: t(\"managementGiftCode.table.status\"),\r\n      dataIndex: \"\",\r\n      align: \"center\",\r\n      filteredValue: pagination.isUser || null,\r\n      filterDropdown: (props) => (\r\n        <FilterDropdown\r\n          field=\"isUser\"\r\n          items={STATUS_GIFT_CODE}\r\n          onSetPagination={setPagination}\r\n          {...props}\r\n        />\r\n      ),\r\n      render: (users) => {\r\n        return (\r\n          <div>\r\n            {checkStatus(users) ? (\r\n              <Tag color=\"green\">{t(\"managementGiftCode.table.neverUse\")}</Tag>\r\n            ) : (\r\n              <Tag color=\"red\">{t(\"managementGiftCode.table.used\")}</Tag>\r\n            )}\r\n          </div>\r\n        );\r\n      },\r\n    },\r\n    {\r\n      title: t(\"managementGiftCode.table.operation\"),\r\n      align: \"center\",\r\n      render: (dataGift) => (\r\n        <Button\r\n          type=\"primary\"\r\n          onClick={(e) => {\r\n            e.stopPropagation();\r\n            handleEdit(dataGift);\r\n          }}\r\n        >\r\n          {t(\"managementGiftCode.table.btnEdit\")}\r\n        </Button>\r\n      ),\r\n    },\r\n  ];\r\n\r\n  const totalPage = value?.paginate?.totalPage;\r\n  const paginationProp = {\r\n    position: [\"bottomRight\"],\r\n    total: totalPage * pagination.take,\r\n    showSizeChanger: true,\r\n    onChange: onChangePagination,\r\n  };\r\n\r\n  return (\r\n    <ComTable\r\n      title={t(\"managementGiftCode.listGiftCode\")}\r\n      columns={columns}\r\n      loading={loading}\r\n      pagination={paginationProp}\r\n      data={value?.data || []}\r\n      onAddTable={handleCreate}\r\n    />\r\n  );\r\n}\r\n\r\nGiftCodeList.propTypes = {};\r\n\r\nexport default GiftCodeList;\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}