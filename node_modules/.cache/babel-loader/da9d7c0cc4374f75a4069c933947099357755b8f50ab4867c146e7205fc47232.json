{"ast":null,"code":"var _s = $RefreshSig$();\nimport React, { useEffect } from \"react\";\nimport { Badge, Col, Dropdown, Layout, Row, message, Avatar } from \"antd\";\nimport { BellOutlined, LogoutOutlined } from \"@ant-design/icons\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { t } from \"i18next\";\nimport { authStore, logoutSuccess, setData } from \"@store/slices/authSlice\";\nimport { authApi } from \"@services/apis/auth\";\nimport useFetch from \"@common/hooks/useFetch\";\nimport { IMAGE_URL } from \"@common/config/endpoint\";\nfunction Header() {\n  _s();\n  const dispatch = useDispatch();\n  const {\n    data\n  } = useSelector(authStore);\n  const {\n    value\n  } = useFetch(() => userApi.getProfile(), []);\n  const handleLogout = () => {\n    authApi.logout().then(() => {\n      dispatch(logoutSuccess());\n      message.success(t(\"auth.message.logoutSuccess\"));\n    }).catch(() => {\n      message.error(t(\"auth.message.logoutFailure\"));\n    });\n  };\n  const items = [{\n    label: /*#__PURE__*/React.createElement(\"span\", {\n      onClick: handleLogout\n    }, \"\\u30ED\\u30B0\\u30A2\\u30A6\\u30C8\"),\n    key: \"logout\",\n    icon: /*#__PURE__*/React.createElement(LogoutOutlined, null)\n  }];\n  useEffect(() => {\n    dispatch(setData(value));\n  }, [value]);\n  return /*#__PURE__*/React.createElement(Layout.Header, {\n    className: \"layout-header\"\n  }, /*#__PURE__*/React.createElement(Row, null, /*#__PURE__*/React.createElement(Col, {\n    lg: 6,\n    xs: 0\n  }), /*#__PURE__*/React.createElement(Col, {\n    lg: 18,\n    xs: 24\n  }, /*#__PURE__*/React.createElement(Row, {\n    align: \"middle\",\n    justify: \"end\"\n  }, /*#__PURE__*/React.createElement(Avatar, {\n    src: `${IMAGE_URL}${data === null || data === void 0 ? void 0 : data.avatar}/original.jpg`,\n    alt: \"\",\n    className: \"avatar\"\n  }), /*#__PURE__*/React.createElement(Dropdown, {\n    menu: {\n      items\n    },\n    className: \"dropdown-menu\",\n    placement: \"bottomRight\"\n  }, /*#__PURE__*/React.createElement(Row, {\n    className: \"cursor-pointer\"\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"display-name\"\n  }, data === null || data === void 0 ? void 0 : data.fullname)))))));\n}\n_s(Header, \"StaDPIEe4YbURMyaPF/Q49cS/mI=\", false, function () {\n  return [useDispatch, useSelector, useFetch];\n});\n_c = Header;\nHeader.propTypes = {};\nexport default Header;\nvar _c;\n$RefreshReg$(_c, \"Header\");","map":{"version":3,"mappings":";AAAA,OAAOA,KAAK,IAAIC,SAAS,QAAQ,OAAO;AACxC,SAASC,KAAK,EAAEC,GAAG,EAAEC,QAAQ,EAAEC,MAAM,EAAEC,GAAG,EAAEC,OAAO,EAAEC,MAAM,QAAQ,MAAM;AACzE,SAASC,YAAY,EAAEC,cAAc,QAAQ,mBAAmB;AAChE,SAASC,WAAW,EAAEC,WAAW,QAAQ,aAAa;AACtD,SAASC,CAAC,QAAQ,SAAS;AAE3B,SAASC,SAAS,EAAEC,aAAa,EAAEC,OAAO,QAAQ,yBAAyB;AAC3E,SAASC,OAAO,QAAQ,qBAAqB;AAC7C,OAAOC,QAAQ,MAAM,wBAAwB;AAC7C,SAASC,SAAS,QAAQ,yBAAyB;AAEnD,SAASC,MAAM,GAAG;EAAA;EAChB,MAAMC,QAAQ,GAAGV,WAAW,EAAE;EAC9B,MAAM;IAAEW;EAAK,CAAC,GAAGV,WAAW,CAACE,SAAS,CAAC;EACvC,MAAM;IAAES;EAAM,CAAC,GAAGL,QAAQ,CAAC,MAAMM,OAAO,CAACC,UAAU,EAAE,EAAE,EAAE,CAAC;EAE1D,MAAMC,YAAY,GAAG,MAAM;IACzBT,OAAO,CACJU,MAAM,EAAE,CACRC,IAAI,CAAC,MAAM;MACVP,QAAQ,CAACN,aAAa,EAAE,CAAC;MACzBR,OAAO,CAACsB,OAAO,CAAChB,CAAC,CAAC,4BAA4B,CAAC,CAAC;IAClD,CAAC,CAAC,CACDiB,KAAK,CAAC,MAAM;MACXvB,OAAO,CAACwB,KAAK,CAAClB,CAAC,CAAC,4BAA4B,CAAC,CAAC;IAChD,CAAC,CAAC;EACN,CAAC;EAED,MAAMmB,KAAK,GAAG,CACZ;IACEC,KAAK,eAAEjC;MAAMkC,OAAO,EAAER;IAAa,oCAAa;IAChDS,GAAG,EAAE,QAAQ;IACbC,IAAI,eAAEpC,oBAACU,cAAc;EACvB,CAAC,CACF;EAEDT,SAAS,CAAC,MAAM;IACdoB,QAAQ,CAACL,OAAO,CAACO,KAAK,CAAC,CAAC;EAC1B,CAAC,EAAE,CAACA,KAAK,CAAC,CAAC;EAEX,oBACEvB,oBAACK,MAAM,CAACe,MAAM;IAACiB,SAAS,EAAC;EAAe,gBACtCrC,oBAACM,GAAG,qBACFN,oBAACG,GAAG;IAACmC,EAAE,EAAE,CAAE;IAACC,EAAE,EAAE;EAAE,EAAG,eACrBvC,oBAACG,GAAG;IAACmC,EAAE,EAAE,EAAG;IAACC,EAAE,EAAE;EAAG,gBAClBvC,oBAACM,GAAG;IAACkC,KAAK,EAAC,QAAQ;IAACC,OAAO,EAAC;EAAK,gBAC/BzC,oBAACQ,MAAM;IACLkC,GAAG,EAAG,GAAEvB,SAAU,GAAEG,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEqB,MAAO,eAAe;IAChDC,GAAG,EAAC,EAAE;IACNP,SAAS,EAAC;EAAQ,EAClB,eACFrC,oBAACI,QAAQ;IACPyC,IAAI,EAAE;MAAEb;IAAM,CAAE;IAChBK,SAAS,EAAC,eAAe;IACzBS,SAAS,EAAC;EAAa,gBAEvB9C,oBAACM,GAAG;IAAC+B,SAAS,EAAC;EAAgB,gBAC7BrC;IAAMqC,SAAS,EAAC;EAAc,GAAEf,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEyB,QAAQ,CAAQ,CAClD,CACG,CACP,CACF,CACF,CACQ;AAEpB;AAAA,GAtDS3B,MAAM;EAAA,QACIT,WAAW,EACXC,WAAW,EACVM,QAAQ;AAAA;AAAA,KAHnBE,MAAM;AAwDfA,MAAM,CAAC4B,SAAS,GAAG,CAAC,CAAC;AAErB,eAAe5B,MAAM;AAAA;AAAA","names":["React","useEffect","Badge","Col","Dropdown","Layout","Row","message","Avatar","BellOutlined","LogoutOutlined","useDispatch","useSelector","t","authStore","logoutSuccess","setData","authApi","useFetch","IMAGE_URL","Header","dispatch","data","value","userApi","getProfile","handleLogout","logout","then","success","catch","error","items","label","onClick","key","icon","className","lg","xs","align","justify","src","avatar","alt","menu","placement","fullname","propTypes"],"sources":["/home/huynd/animalwatch_admin/src/components/layout/Header.jsx"],"sourcesContent":["import React, { useEffect } from \"react\";\nimport { Badge, Col, Dropdown, Layout, Row, message, Avatar } from \"antd\";\nimport { BellOutlined, LogoutOutlined } from \"@ant-design/icons\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { t } from \"i18next\";\n\nimport { authStore, logoutSuccess, setData } from \"@store/slices/authSlice\";\nimport { authApi } from \"@services/apis/auth\";\nimport useFetch from \"@common/hooks/useFetch\";\nimport { IMAGE_URL } from \"@common/config/endpoint\";\n\nfunction Header() {\n  const dispatch = useDispatch();\n  const { data } = useSelector(authStore);\n  const { value } = useFetch(() => userApi.getProfile(), []);\n\n  const handleLogout = () => {\n    authApi\n      .logout()\n      .then(() => {\n        dispatch(logoutSuccess());\n        message.success(t(\"auth.message.logoutSuccess\"));\n      })\n      .catch(() => {\n        message.error(t(\"auth.message.logoutFailure\"));\n      });\n  };\n\n  const items = [\n    {\n      label: <span onClick={handleLogout}>ログアウト</span>,\n      key: \"logout\",\n      icon: <LogoutOutlined />,\n    },\n  ];\n\n  useEffect(() => {\n    dispatch(setData(value));\n  }, [value]);\n\n  return (\n    <Layout.Header className=\"layout-header\">\n      <Row>\n        <Col lg={6} xs={0} />\n        <Col lg={18} xs={24}>\n          <Row align=\"middle\" justify=\"end\">\n            <Avatar\n              src={`${IMAGE_URL}${data?.avatar}/original.jpg`}\n              alt=\"\"\n              className=\"avatar\"\n            />\n            <Dropdown\n              menu={{ items }}\n              className=\"dropdown-menu\"\n              placement=\"bottomRight\"\n            >\n              <Row className=\"cursor-pointer\">\n                <span className=\"display-name\">{data?.fullname}</span>\n              </Row>\n            </Dropdown>\n          </Row>\n        </Col>\n      </Row>\n    </Layout.Header>\n  );\n}\n\nHeader.propTypes = {};\n\nexport default Header;\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}