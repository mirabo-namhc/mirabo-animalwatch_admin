{"ast":null,"code":"/* eslint-disable no-restricted-syntax */\n/* eslint-disable guard-for-in */\nimport { DATE_FORMAT_DISPLAY } from \"@common/constant/date\";\nimport { formatDateTimeTable } from \"./dateHelper\";\nexport function convertToCSV(objArray) {\n  const array = typeof objArray !== \"object\" ? JSON.parse(objArray) : objArray;\n  let str = \"\";\n  for (let i = 0; i < array.length; i++) {\n    let line = \"\";\n    for (const index in array[i]) {\n      if (line !== \"\") line += \",\";\n      line += array[i][index];\n    }\n    str += `${line}\\r\\n`;\n  }\n  return str;\n}\nexport const prepareCsvToDownload = (csv, exportedFilename) => {\n  const blob = new Blob([csv], {\n    type: \"text/csv;charset=utf-8;\"\n  });\n  if (navigator.msSaveBlob) {\n    // IE 10+\n    navigator.msSaveBlob(blob, exportedFilename);\n  } else {\n    const link = document.createElement(\"a\");\n    if (link.download !== undefined) {\n      // feature detection\n      // Browsers that support HTML5 download attribute\n      const url = URL.createObjectURL(blob);\n      link.setAttribute(\"href\", url);\n      link.setAttribute(\"download\", exportedFilename);\n      link.style.visibility = \"hidden\";\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n    }\n  }\n};\nexport function exportCSVFile(headers, items, fileTitle) {\n  if (headers) {\n    items.unshift(headers);\n  }\n\n  // Convert Object to JSON\n  const jsonObject = JSON.stringify(items);\n  const csv = convertToCSV(jsonObject);\n  const exportedFilename = `${fileTitle}.csv` || \"export.csv\";\n  prepareCsvToDownload(csv, exportedFilename);\n}\nexport const formateDataCsvUserJoin = function () {\n  let data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  let isDrawEvent = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n  return data.map(item => {\n    const dataFormate = {\n      id: item.id,\n      username: item.user.username,\n      fullName: item.fullName,\n      email: item.email,\n      phoneNumber: item.phoneNumber,\n      address: item.address,\n      birthDay: formatDateTimeTable(item.birthday, DATE_FORMAT_DISPLAY),\n      timesUserJoined: item.eventJoineds,\n      status: \"参加予定\"\n    };\n    if (!isDrawEvent) delete dataFormate.status;\n    return dataFormate;\n  });\n};","map":{"version":3,"mappings":"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","names":["DATE_FORMAT_DISPLAY","formatDateTimeTable","convertToCSV","objArray","array","JSON","parse","str","i","length","line","index","prepareCsvToDownload","csv","exportedFilename","blob","Blob","type","navigator","msSaveBlob","link","document","createElement","download","undefined","url","URL","createObjectURL","setAttribute","style","visibility","body","appendChild","click","removeChild","exportCSVFile","headers","items","fileTitle","unshift","jsonObject","stringify","formateDataCsvUserJoin","data","isDrawEvent","map","item","dataFormate","id","username","user","fullName","email","phoneNumber","address","birthDay","birthday","timesUserJoined","eventJoineds","status"],"sources":["/home/huynd/animalwatch_admin/src/common/utils/csv.js"],"sourcesContent":["/* eslint-disable no-restricted-syntax */\n/* eslint-disable guard-for-in */\nimport { DATE_FORMAT_DISPLAY } from \"@common/constant/date\";\nimport { formatDateTimeTable } from \"./dateHelper\";\n\nexport function convertToCSV(objArray) {\n  const array = typeof objArray !== \"object\" ? JSON.parse(objArray) : objArray;\n  let str = \"\";\n\n  for (let i = 0; i < array.length; i++) {\n    let line = \"\";\n    for (const index in array[i]) {\n      if (line !== \"\") line += \",\";\n\n      line += array[i][index];\n    }\n\n    str += `${line}\\r\\n`;\n  }\n\n  return str;\n}\n\nexport const prepareCsvToDownload = (csv, exportedFilename) => {\n  const blob = new Blob([csv], { type: \"text/csv;charset=utf-8;\" });\n  if (navigator.msSaveBlob) {\n    // IE 10+\n    navigator.msSaveBlob(blob, exportedFilename);\n  } else {\n    const link = document.createElement(\"a\");\n    if (link.download !== undefined) {\n      // feature detection\n      // Browsers that support HTML5 download attribute\n      const url = URL.createObjectURL(blob);\n      link.setAttribute(\"href\", url);\n      link.setAttribute(\"download\", exportedFilename);\n      link.style.visibility = \"hidden\";\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n    }\n  }\n};\n\nexport function exportCSVFile(headers, items, fileTitle) {\n  if (headers) {\n    items.unshift(headers);\n  }\n\n  // Convert Object to JSON\n  const jsonObject = JSON.stringify(items);\n\n  const csv = convertToCSV(jsonObject);\n\n  const exportedFilename = `${fileTitle}.csv` || \"export.csv\";\n\n  prepareCsvToDownload(csv, exportedFilename);\n}\n\nexport const formateDataCsvUserJoin = (data = [], isDrawEvent = true) => {\n  return data.map((item) => {\n    const dataFormate = {\n      id: item.id,\n      username: item.user.username,\n      fullName: item.fullName,\n      email: item.email,\n      phoneNumber: item.phoneNumber,\n      address: item.address,\n      birthDay: formatDateTimeTable(item.birthday, DATE_FORMAT_DISPLAY),\n      timesUserJoined: item.eventJoineds,\n      status: \"参加予定\",\n    };\n    if (!isDrawEvent) delete dataFormate.status;\n\n    return dataFormate;\n  });\n};\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}