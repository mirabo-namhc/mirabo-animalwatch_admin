{"ast":null,"code":"var _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport { useLocation, useNavigate } from \"react-router-dom\";\nimport { Button, Card, Form, message, Row } from \"antd\";\nimport { t } from \"i18next\";\nimport { validate } from \"@validate/\";\nimport { authApi } from \"@services/apis/auth\";\nimport PATH_URL from \"@common/config/pathURL\";\nimport { MyComponents } from \"@components/form\";\nimport { USER_TAG } from \"@common/constant/masterData\";\nimport { userApi } from \"@services/apis/user\";\nfunction FormCreate() {\n  _s();\n  const navigate = useNavigate();\n  const {\n    state\n  } = useLocation();\n  const [loading, setLoading] = useState(false);\n  const handleBack = () => {\n    navigate(\"..\");\n  };\n  const handleFinish = values => {\n    setLoading(true);\n    if (!state) {\n      var _values$email;\n      const payload = {\n        ...values,\n        email: values === null || values === void 0 ? void 0 : (_values$email = values.email) === null || _values$email === void 0 ? void 0 : _values$email.trim()\n      };\n      authApi.register(payload).then(() => {\n        navigate(`../${PATH_URL.MANAGER_USER.OTP}`, {\n          state: payload.email\n        });\n        message.success(t(\"managementAdmin.message.successCreate\"));\n      }).catch(() => {\n        message.error(t(\"managementAdmin.message.errCreate\"));\n      }).finally(() => setLoading(false));\n      return;\n    }\n    userApi.patchUserTag({\n      id: state === null || state === void 0 ? void 0 : state.id,\n      tag: values.tag\n    }).then(res => {\n      if (res.success) {\n        message.success(t(\"managementUser.message.editSuccess\"));\n        navigate(\"..\");\n      }\n    }).catch(err => {\n      message.success(t(\"managementUser.message.editErr\"));\n      throw new Error(err);\n    }).finally(() => setLoading(false));\n  };\n  return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(Row, {\n    align: \"middle\",\n    className: \"full-width header-table\"\n  }, /*#__PURE__*/React.createElement(\"h1\", null, !state ? t(\"managementUser.createUser\") : t(\"managementUser.editUser\"))), /*#__PURE__*/React.createElement(Card, null, /*#__PURE__*/React.createElement(Form, {\n    labelCol: {\n      span: 7\n    },\n    wrapperCol: {\n      span: 12\n    },\n    colon: false,\n    initialValues: state,\n    onFinish: handleFinish\n  }, !state ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(MyComponents.TextField, {\n    label: t(\"managementAdmin.form.email\"),\n    name: \"email\",\n    rules: [validate.email(t)]\n  }), /*#__PURE__*/React.createElement(MyComponents.TextField, {\n    label: t(\"managementAdmin.form.password\"),\n    type: \"password\",\n    name: \"password\"\n  })) : /*#__PURE__*/React.createElement(MyComponents.Select, {\n    label: t(\"managementUser.table.userTag\"),\n    name: \"tag\",\n    listOptions: USER_TAG\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex jc-center gap-20\"\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"default\",\n    onClick: handleBack\n  }, t(\"managementUser.form.btnBack\")), /*#__PURE__*/React.createElement(Button, {\n    type: \"primary\",\n    htmlType: \"submit\",\n    loading: loading,\n    disabled: loading\n  }, state ? t(\"managementUser.form.btnEdit\") : t(\"managementUser.form.btnCreate\"))))));\n}\n_s(FormCreate, \"Ywf5cDSX1mIS0vhk372R2El3Edk=\", false, function () {\n  return [useNavigate, useLocation];\n});\n_c = FormCreate;\nFormCreate.propTypes = {};\nexport default FormCreate;\nvar _c;\n$RefreshReg$(_c, \"FormCreate\");","map":{"version":3,"mappings":"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","names":["React","useState","useLocation","useNavigate","Button","Card","Form","message","Row","t","validate","authApi","PATH_URL","MyComponents","USER_TAG","userApi","FormCreate","navigate","state","loading","setLoading","handleBack","handleFinish","values","payload","email","trim","register","then","MANAGER_USER","OTP","success","catch","error","finally","patchUserTag","id","tag","res","err","Error","align","className","labelCol","span","wrapperCol","colon","initialValues","onFinish","TextField","label","name","rules","type","Select","listOptions","onClick","htmlType","disabled","propTypes"],"sources":["/home/huynd/animalwatch_admin/src/pages/manager/user/UserForm.jsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useLocation, useNavigate } from \"react-router-dom\";\nimport { Button, Card, Form, message, Row } from \"antd\";\nimport { t } from \"i18next\";\n\nimport { validate } from \"@validate/\";\nimport { authApi } from \"@services/apis/auth\";\nimport PATH_URL from \"@common/config/pathURL\";\nimport { MyComponents } from \"@components/form\";\nimport { USER_TAG } from \"@common/constant/masterData\";\nimport { userApi } from \"@services/apis/user\";\n\nfunction FormCreate() {\n  const navigate = useNavigate();\n  const { state } = useLocation();\n  const [loading, setLoading] = useState(false);\n\n  const handleBack = () => {\n    navigate(\"..\");\n  };\n\n  const handleFinish = (values) => {\n    setLoading(true);\n    if (!state) {\n      const payload = {\n        ...values,\n        email: values?.email?.trim(),\n      };\n\n      authApi\n        .register(payload)\n        .then(() => {\n          navigate(`../${PATH_URL.MANAGER_USER.OTP}`, { state: payload.email });\n          message.success(t(\"managementAdmin.message.successCreate\"));\n        })\n        .catch(() => {\n          message.error(t(\"managementAdmin.message.errCreate\"));\n        })\n        .finally(() => setLoading(false));\n      return;\n    }\n\n    userApi\n      .patchUserTag({\n        id: state?.id,\n        tag: values.tag,\n      })\n      .then((res) => {\n        if (res.success) {\n          message.success(t(\"managementUser.message.editSuccess\"));\n          navigate(\"..\");\n        }\n      })\n      .catch((err) => {\n        message.success(t(\"managementUser.message.editErr\"));\n        throw new Error(err);\n      })\n      .finally(() => setLoading(false));\n  };\n\n  return (\n    <div>\n      <Row align=\"middle\" className=\"full-width header-table\">\n        <h1>\n          {!state\n            ? t(\"managementUser.createUser\")\n            : t(\"managementUser.editUser\")}\n        </h1>\n      </Row>\n      <Card>\n        <Form\n          labelCol={{\n            span: 7,\n          }}\n          wrapperCol={{\n            span: 12,\n          }}\n          colon={false}\n          initialValues={state}\n          onFinish={handleFinish}\n        >\n          {!state ? (\n            <>\n              <MyComponents.TextField\n                label={t(\"managementAdmin.form.email\")}\n                name=\"email\"\n                rules={[validate.email(t)]}\n              />\n              <MyComponents.TextField\n                label={t(\"managementAdmin.form.password\")}\n                type=\"password\"\n                name=\"password\"\n              />\n            </>\n          ) : (\n            <MyComponents.Select\n              label={t(\"managementUser.table.userTag\")}\n              name=\"tag\"\n              listOptions={USER_TAG}\n            />\n          )}\n          <div className=\"flex jc-center gap-20\">\n            <Button type=\"default\" onClick={handleBack}>\n              {t(\"managementUser.form.btnBack\")}\n            </Button>\n            <Button\n              type=\"primary\"\n              htmlType=\"submit\"\n              loading={loading}\n              disabled={loading}\n            >\n              {state\n                ? t(\"managementUser.form.btnEdit\")\n                : t(\"managementUser.form.btnCreate\")}\n            </Button>\n          </div>\n        </Form>\n      </Card>\n    </div>\n  );\n}\n\nFormCreate.propTypes = {};\n\nexport default FormCreate;\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}