{"ast":null,"code":"var _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport PATH_URL from \"@common/config/pathURL\";\nimport useFetch from \"@common/hooks/useFetch\";\nimport ComTable from \"@components/common/ComTable\";\nimport { postApi } from \"@services/post\";\nimport { useNavigate } from \"react-router-dom\";\nfunction PostList(props) {\n  _s();\n  var _value$paginate, _dataPost$paginate;\n  const navigate = useNavigate();\n  const [dataPost, setDataPost] = useState([]);\n  const [refetch, setRefetch] = useState(\"\");\n  const PAGE_SIZE = 10;\n  const [pagination, setPagination] = useState({\n    page: 1,\n    limit: PAGE_SIZE\n  });\n  const {\n    loading,\n    value\n  } = useFetch(() => postApi.getPosts(pagination), [pagination.page, refetch]);\n  const totalPage = value === null || value === void 0 ? void 0 : (_value$paginate = value.paginate) === null || _value$paginate === void 0 ? void 0 : _value$paginate.totalPage;\n  const paginationProp = {\n    position: [\"bottomRight\"],\n    total: totalPage * 10\n  };\n  const columns = [{\n    title: \"Title\",\n    dataIndex: \"title\"\n  }, {\n    title: \"Description\",\n    dataIndex: \"description\"\n  }];\n  const getListPost = async () => {\n    const res = await postApi.getPosts(pagination);\n    setDataPost(res);\n  };\n  const handleTableChange = newPagination => {\n    setPagination({\n      ...pagination,\n      page: newPagination.current,\n      limit: pagination.limit\n    });\n  };\n  useEffect(() => {\n    getListPost();\n  }, [pagination]);\n  useEffect(() => {\n    setPagination(prev => ({\n      ...prev,\n      total: 10\n    }));\n  }, [dataPost === null || dataPost === void 0 ? void 0 : (_dataPost$paginate = dataPost.paginate) === null || _dataPost$paginate === void 0 ? void 0 : _dataPost$paginate.totalPage]);\n  const handleCreate = () => {\n    navigate(PATH_URL.POST.FORM);\n  };\n  return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(ComTable, {\n    title: \"List Post\",\n    columns: columns,\n    data: dataPost.data,\n    onAddTable: handleCreate,\n    onChangeTable: handleTableChange,\n    pagination: paginationProp,\n    loading: loading\n  }));\n}\n_s(PostList, \"07jkWceVyW499iohzHp4MX3Jdr4=\", false, function () {\n  return [useNavigate, useFetch];\n});\n_c = PostList;\nPostList.propTypes = {};\nexport default PostList;\nvar _c;\n$RefreshReg$(_c, \"PostList\");","map":{"version":3,"mappings":";AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,OAAOC,QAAQ,MAAM,wBAAwB;AAC7C,OAAOC,QAAQ,MAAM,wBAAwB;AAC7C,OAAOC,QAAQ,MAAM,6BAA6B;AAClD,SAASC,OAAO,QAAQ,gBAAgB;AACxC,SAASC,WAAW,QAAQ,kBAAkB;AAE9C,SAASC,QAAQ,CAACC,KAAK,EAAE;EAAA;EAAA;EACvB,MAAMC,QAAQ,GAAGH,WAAW,EAAE;EAC9B,MAAM,CAACI,QAAQ,EAAEC,WAAW,CAAC,GAAGV,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACW,OAAO,EAAEC,UAAU,CAAC,GAAGZ,QAAQ,CAAC,EAAE,CAAC;EAE1C,MAAMa,SAAS,GAAG,EAAE;EACpB,MAAM,CAACC,UAAU,EAAEC,aAAa,CAAC,GAAGf,QAAQ,CAAC;IAC3CgB,IAAI,EAAE,CAAC;IACPC,KAAK,EAAEJ;EACT,CAAC,CAAC;EAEF,MAAM;IAAEK,OAAO;IAAEC;EAAM,CAAC,GAAGjB,QAAQ,CACjC,MAAME,OAAO,CAACgB,QAAQ,CAACN,UAAU,CAAC,EAClC,CAACA,UAAU,CAACE,IAAI,EAAEL,OAAO,CAAC,CAC3B;EACD,MAAMU,SAAS,GAAGF,KAAK,aAALA,KAAK,0CAALA,KAAK,CAAEG,QAAQ,oDAAfH,gBAAiBE,SAAS;EAC5C,MAAME,cAAc,GAAG;IACrBC,QAAQ,EAAE,CAAC,aAAa,CAAC;IACzBC,KAAK,EAAEJ,SAAS,GAAG;EACrB,CAAC;EACD,MAAMK,OAAO,GAAG,CACd;IACEC,KAAK,EAAE,OAAO;IACdC,SAAS,EAAE;EACb,CAAC,EACD;IACED,KAAK,EAAE,aAAa;IACpBC,SAAS,EAAE;EACb,CAAC,CACF;EAED,MAAMC,WAAW,GAAG,YAAY;IAC9B,MAAMC,GAAG,GAAG,MAAM1B,OAAO,CAACgB,QAAQ,CAACN,UAAU,CAAC;IAC9CJ,WAAW,CAACoB,GAAG,CAAC;EAClB,CAAC;EAED,MAAMC,iBAAiB,GAAIC,aAAa,IAAK;IAC3CjB,aAAa,CAAC;MACZ,GAAGD,UAAU;MACbE,IAAI,EAAEgB,aAAa,CAACC,OAAO;MAC3BhB,KAAK,EAAEH,UAAU,CAACG;IACpB,CAAC,CAAC;EACJ,CAAC;EAEDlB,SAAS,CAAC,MAAM;IACd8B,WAAW,EAAE;EACf,CAAC,EAAE,CAACf,UAAU,CAAC,CAAC;EAEhBf,SAAS,CAAC,MAAM;IACdgB,aAAa,CAAEmB,IAAI,KAAM;MACvB,GAAGA,IAAI;MACPT,KAAK,EAAE;IACT,CAAC,CAAC,CAAC;EACL,CAAC,EAAE,CAAChB,QAAQ,aAARA,QAAQ,6CAARA,QAAQ,CAAEa,QAAQ,uDAAlBb,mBAAoBY,SAAS,CAAC,CAAC;EAEnC,MAAMc,YAAY,GAAG,MAAM;IACzB3B,QAAQ,CAACP,QAAQ,CAACmC,IAAI,CAACC,IAAI,CAAC;EAC9B,CAAC;EACD,oBACEvC,8CACEA,oBAACK,QAAQ;IACPwB,KAAK,EAAC,WAAW;IACjBD,OAAO,EAAEA,OAAQ;IACjBY,IAAI,EAAE7B,QAAQ,CAAC6B,IAAK;IACpBC,UAAU,EAAEJ,YAAa;IACzBK,aAAa,EAAET,iBAAkB;IACjCjB,UAAU,EAAES,cAAe;IAC3BL,OAAO,EAAEA;EAAQ,EACjB,CACE;AAEV;AAAA,GAvESZ,QAAQ;EAAA,QACED,WAAW,EAUDH,QAAQ;AAAA;AAAA,KAX5BI,QAAQ;AAyEjBA,QAAQ,CAACmC,SAAS,GAAG,CAAC,CAAC;AAEvB,eAAenC,QAAQ;AAAA;AAAA","names":["React","useEffect","useState","PATH_URL","useFetch","ComTable","postApi","useNavigate","PostList","props","navigate","dataPost","setDataPost","refetch","setRefetch","PAGE_SIZE","pagination","setPagination","page","limit","loading","value","getPosts","totalPage","paginate","paginationProp","position","total","columns","title","dataIndex","getListPost","res","handleTableChange","newPagination","current","prev","handleCreate","POST","FORM","data","onAddTable","onChangeTable","propTypes"],"sources":["/home/huynd/animalwatch_admin/src/pages/posts/PostList.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport PATH_URL from \"@common/config/pathURL\";\r\nimport useFetch from \"@common/hooks/useFetch\";\r\nimport ComTable from \"@components/common/ComTable\";\r\nimport { postApi } from \"@services/post\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nfunction PostList(props) {\r\n  const navigate = useNavigate();\r\n  const [dataPost, setDataPost] = useState([]);\r\n  const [refetch, setRefetch] = useState(\"\");\r\n\r\n  const PAGE_SIZE = 10;\r\n  const [pagination, setPagination] = useState({\r\n    page: 1,\r\n    limit: PAGE_SIZE,\r\n  });\r\n\r\n  const { loading, value } = useFetch(\r\n    () => postApi.getPosts(pagination),\r\n    [pagination.page, refetch],\r\n  );\r\n  const totalPage = value?.paginate?.totalPage;\r\n  const paginationProp = {\r\n    position: [\"bottomRight\"],\r\n    total: totalPage * 10,\r\n  };\r\n  const columns = [\r\n    {\r\n      title: \"Title\",\r\n      dataIndex: \"title\",\r\n    },\r\n    {\r\n      title: \"Description\",\r\n      dataIndex: \"description\",\r\n    },\r\n  ];\r\n\r\n  const getListPost = async () => {\r\n    const res = await postApi.getPosts(pagination);\r\n    setDataPost(res);\r\n  };\r\n\r\n  const handleTableChange = (newPagination) => {\r\n    setPagination({\r\n      ...pagination,\r\n      page: newPagination.current,\r\n      limit: pagination.limit,\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    getListPost();\r\n  }, [pagination]);\r\n\r\n  useEffect(() => {\r\n    setPagination((prev) => ({\r\n      ...prev,\r\n      total: 10,\r\n    }));\r\n  }, [dataPost?.paginate?.totalPage]);\r\n\r\n  const handleCreate = () => {\r\n    navigate(PATH_URL.POST.FORM);\r\n  };\r\n  return (\r\n    <div>\r\n      <ComTable\r\n        title=\"List Post\"\r\n        columns={columns}\r\n        data={dataPost.data}\r\n        onAddTable={handleCreate}\r\n        onChangeTable={handleTableChange}\r\n        pagination={paginationProp}\r\n        loading={loading}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nPostList.propTypes = {};\r\n\r\nexport default PostList;\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}