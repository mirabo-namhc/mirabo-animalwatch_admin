{"ast":null,"code":"var _s = $RefreshSig$();\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\n/* eslint-disable react/no-unstable-nested-components */\nimport React, { useState } from \"react\";\nimport { Button, message, Modal, Tag } from \"antd\";\nimport dayjs from \"dayjs\";\nimport { useTranslation } from \"react-i18next\";\nimport { useNavigate } from \"react-router-dom\";\nimport { ExclamationCircleOutlined } from \"@ant-design/icons\";\nimport PATH_URL from \"@common/config/pathURL\";\nimport { DATE_TIME_FORMAT_MINUTE } from \"@common/constant/date\";\nimport { STATUS_EVENT, STATUS_DATE_EVENT, TYPE_EVENT, LEVEL_EVENT } from \"@common/constant/masterData\";\nimport useFetch from \"@common/hooks/useFetch\";\nimport { formatDateTimeTable, validateDateStatus } from \"@common/utils/dateHelper\";\nimport ComTable from \"@components/common/ComTable\";\nimport { eventApi } from \"@services/apis/eventApi\";\nimport FilterDropdown from \"@components/table/PopupFilter\";\nfunction EventList() {\n  _s();\n  var _value$paginate;\n  const navigate = useNavigate();\n  const {\n    t\n  } = useTranslation();\n  const [refetch, setRefetch] = useState(\"\");\n  const [pagination, setPagination] = useState({\n    page: 1,\n    take: 10,\n    keyword: \"\",\n    status: null,\n    typeEvent: null\n  });\n  const {\n    loading,\n    value\n  } = useFetch(ourRequest => eventApi.getListEvents(pagination, ourRequest), [pagination, refetch]);\n  const handleCreate = () => {\n    navigate(PATH_URL.MANAGER_EVENT.CREATE);\n  };\n  const onChangePagination = (currentPage, totalItemPerPage, _) => {\n    setPagination(curState => ({\n      ...curState,\n      page: currentPage,\n      take: totalItemPerPage\n    }));\n  };\n  const handleSearch = keyWord => {\n    setPagination(curState => ({\n      ...curState,\n      page: 1,\n      keyword: keyWord === null || keyWord === void 0 ? void 0 : keyWord.trim()\n    }));\n  };\n  const handleDelete = events => {\n    eventApi.deleteEvent(events.id, 0).then(() => {\n      setRefetch(`deleteEvent-${events.id}`);\n      message.success(t(\"events.message.deleteSuccess\"));\n    }).catch(() => {\n      if (validateDateStatus(events === null || events === void 0 ? void 0 : events.startDate, events === null || events === void 0 ? void 0 : events.endDate) === \"Inprogress\") {\n        message.error(t(\"events.message.deleteInprogressErr\"));\n      } else {\n        message.error(t(\"events.message.deleteInprogressErr\"));\n      }\n    });\n  };\n  const handleHidden = eventId => {\n    eventApi.deleteEvent(eventId, 1).then(() => {\n      setRefetch(`deleteEvent-${eventId}`);\n      message.success(t(\"events.message.hiddenSuccess\"));\n    }).catch(() => {\n      message.error(t(\"events.message.hiddenError\"));\n    });\n  };\n  const handleClickRow = evtData => {\n    navigate(PATH_URL.MANAGER_EVENT.DETAIL, {\n      state: evtData\n    });\n  };\n  const confirmDelete = events => {\n    Modal.confirm({\n      icon: /*#__PURE__*/React.createElement(ExclamationCircleOutlined, null),\n      centered: true,\n      content: t(\"events.modal.textConfirmDel\"),\n      okText: t(\"events.modal.textYes\"),\n      cancelText: t(\"events.modal.textNo\"),\n      onOk: () => handleDelete(events)\n    });\n  };\n  const confirmHidden = eventId => {\n    Modal.confirm({\n      icon: /*#__PURE__*/React.createElement(ExclamationCircleOutlined, null),\n      centered: true,\n      content: t(\"events.modal.textConfirmHidden\"),\n      okText: t(\"events.modal.textYes\"),\n      cancelText: t(\"events.modal.textNo\"),\n      onOk: () => handleHidden(eventId)\n    });\n  };\n  const totalPage = value === null || value === void 0 ? void 0 : (_value$paginate = value.paginate) === null || _value$paginate === void 0 ? void 0 : _value$paginate.totalPage;\n  const paginationProp = {\n    position: [\"bottomRight\"],\n    total: totalPage * 10,\n    showSizeChanger: true,\n    onChange: onChangePagination,\n    current: pagination.page\n  };\n  const columns = [{\n    title: \"ID\",\n    dataIndex: \"id\",\n    width: \"80px\",\n    align: \"center\"\n  }, {\n    title: t(\"events.list.nameEvent\"),\n    dataIndex: \"title\",\n    width: \"200px\",\n    align: \"center\"\n  }, {\n    title: t(\"events.list.type\"),\n    dataIndex: \"type\",\n    width: \"200px\",\n    align: \"center\",\n    filteredValue: pagination.typeEvent,\n    render: type => {\n      var _TYPE_EVENT$type;\n      return /*#__PURE__*/React.createElement(\"span\", null, (_TYPE_EVENT$type = TYPE_EVENT[type]) === null || _TYPE_EVENT$type === void 0 ? void 0 : _TYPE_EVENT$type.label);\n    },\n    filterDropdown: props => /*#__PURE__*/React.createElement(FilterDropdown, _extends({\n      field: \"typeEvent\",\n      items: TYPE_EVENT,\n      onSetPagination: setPagination\n    }, props))\n  }, {\n    title: t(\"events.list.dateStartEvent\"),\n    dataIndex: \"startDate\",\n    width: \"350px\",\n    align: \"center\",\n    render: startDate => /*#__PURE__*/React.createElement(\"span\", null, dayjs(startDate).format(DATE_TIME_FORMAT_MINUTE))\n  }, {\n    title: t(\"events.list.position\"),\n    dataIndex: \"place\",\n    width: \"200px\",\n    align: \"center\"\n  }, {\n    title: t(\"events.list.runningDistance\"),\n    dataIndex: \"totalDistance\",\n    width: \"200px\",\n    align: \"center\",\n    render: totalDistance => /*#__PURE__*/React.createElement(\"span\", null, totalDistance || \"---\")\n  }, {\n    title: t(\"events.list.level\"),\n    dataIndex: \"newLevel\",\n    width: \"200px\",\n    align: \"center\",\n    render: newLevel => /*#__PURE__*/React.createElement(\"span\", null, newLevel === null || newLevel === void 0 ? void 0 : newLevel.name)\n  }, {\n    title: t(\"events.list.nameRoute\"),\n    dataIndex: \"courses\",\n    width: \"200px\",\n    align: \"center\",\n    render: courses => /*#__PURE__*/React.createElement(\"div\", null, courses === null || courses === void 0 ? void 0 : courses.map((course, i) => /*#__PURE__*/React.createElement(Tag, {\n      key: i\n    }, course.title)))\n  }, {\n    title: t(\"events.list.dateEndEvent\"),\n    dataIndex: \"endDate\",\n    align: \"center\",\n    width: \"350px\",\n    render: endDate => /*#__PURE__*/React.createElement(\"span\", null, endDate && formatDateTimeTable(endDate))\n  }, {\n    title: t(\"events.list.status\"),\n    align: \"center\",\n    width: \"200px\",\n    filteredValue: pagination.status,\n    filterDropdown: props => /*#__PURE__*/React.createElement(FilterDropdown, _extends({\n      field: \"status\",\n      onSetPagination: setPagination,\n      items: STATUS_EVENT\n    }, props)),\n    render: eventData => {\n      return /*#__PURE__*/React.createElement(\"span\", null, (eventData === null || eventData === void 0 ? void 0 : eventData.startDate) && STATUS_DATE_EVENT[validateDateStatus(eventData === null || eventData === void 0 ? void 0 : eventData.startDate, eventData === null || eventData === void 0 ? void 0 : eventData.endDate)]);\n    }\n  }, {\n    title: t(\"events.form.operation\"),\n    align: \"center\",\n    width: 300,\n    render: events => /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Button, {\n      type: \"primary\",\n      onClick: e => {\n        e.stopPropagation();\n        navigate(PATH_URL.MANAGER_EVENT.USER_JOIN, {\n          state: events\n        });\n      }\n    }, t(\"events.list.btnUserInfoJoin\")), /*#__PURE__*/React.createElement(Button, {\n      className: \"btn submit-btn ml-10\",\n      type: \"primary\",\n      disabled: !(events !== null && events !== void 0 && events.status),\n      onClick: e => {\n        e.stopPropagation();\n        if (e.target.innerText !== t(\"events.list.hidden\")) {\n          confirmDelete(events);\n        } else {\n          confirmHidden(events.id);\n        }\n      }\n    }, validateDateStatus(events === null || events === void 0 ? void 0 : events.startDate, events === null || events === void 0 ? void 0 : events.endDate) === \"Prepare\" ? t(\"table.btnDel\") : t(\"events.list.hidden\")))\n  }];\n  return /*#__PURE__*/React.createElement(ComTable, {\n    title: t(\"events.tableTitle\"),\n    loading: loading,\n    columns: columns,\n    maxWidth: 2000,\n    data: (value === null || value === void 0 ? void 0 : value.data) || [],\n    pagination: paginationProp,\n    onAddTable: handleCreate,\n    onSearch: handleSearch,\n    onClickRow: handleClickRow\n  });\n}\n_s(EventList, \"wIaU5/d9AvYCwHFmhHRpjqFHNhM=\", false, function () {\n  return [useNavigate, useTranslation, useFetch];\n});\n_c = EventList;\nEventList.propTypes = {};\nexport default EventList;\nvar _c;\n$RefreshReg$(_c, \"EventList\");","map":{"version":3,"mappings":"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","names":["React","useState","Button","message","Modal","Tag","dayjs","useTranslation","useNavigate","ExclamationCircleOutlined","PATH_URL","DATE_TIME_FORMAT_MINUTE","STATUS_EVENT","STATUS_DATE_EVENT","TYPE_EVENT","LEVEL_EVENT","useFetch","formatDateTimeTable","validateDateStatus","ComTable","eventApi","FilterDropdown","EventList","navigate","t","refetch","setRefetch","pagination","setPagination","page","take","keyword","status","typeEvent","loading","value","ourRequest","getListEvents","handleCreate","MANAGER_EVENT","CREATE","onChangePagination","currentPage","totalItemPerPage","_","curState","handleSearch","keyWord","trim","handleDelete","events","deleteEvent","id","then","success","catch","startDate","endDate","error","handleHidden","eventId","handleClickRow","evtData","DETAIL","state","confirmDelete","confirm","icon","centered","content","okText","cancelText","onOk","confirmHidden","totalPage","paginate","paginationProp","position","total","showSizeChanger","onChange","current","columns","title","dataIndex","width","align","filteredValue","render","type","label","filterDropdown","props","field","items","onSetPagination","format","totalDistance","newLevel","name","courses","map","course","i","key","eventData","onClick","e","stopPropagation","USER_JOIN","className","disabled","target","innerText","maxWidth","data","onAddTable","onSearch","onClickRow","propTypes"],"sources":["/home/huynd/animalwatch_admin/src/pages/manager/event/EventList.jsx"],"sourcesContent":["/* eslint-disable react/no-unstable-nested-components */\nimport React, { useState } from \"react\";\nimport { Button, message, Modal, Tag } from \"antd\";\nimport dayjs from \"dayjs\";\nimport { useTranslation } from \"react-i18next\";\nimport { useNavigate } from \"react-router-dom\";\n\nimport { ExclamationCircleOutlined } from \"@ant-design/icons\";\nimport PATH_URL from \"@common/config/pathURL\";\nimport { DATE_TIME_FORMAT_MINUTE } from \"@common/constant/date\";\nimport {\n  STATUS_EVENT,\n  STATUS_DATE_EVENT,\n  TYPE_EVENT,\n  LEVEL_EVENT,\n} from \"@common/constant/masterData\";\nimport useFetch from \"@common/hooks/useFetch\";\nimport {\n  formatDateTimeTable,\n  validateDateStatus,\n} from \"@common/utils/dateHelper\";\nimport ComTable from \"@components/common/ComTable\";\nimport { eventApi } from \"@services/apis/eventApi\";\nimport FilterDropdown from \"@components/table/PopupFilter\";\n\nfunction EventList() {\n  const navigate = useNavigate();\n  const { t } = useTranslation();\n  const [refetch, setRefetch] = useState(\"\");\n\n  const [pagination, setPagination] = useState({\n    page: 1,\n    take: 10,\n    keyword: \"\",\n    status: null,\n    typeEvent: null,\n  });\n\n  const { loading, value } = useFetch(\n    (ourRequest) => eventApi.getListEvents(pagination, ourRequest),\n    [pagination, refetch],\n  );\n\n  const handleCreate = () => {\n    navigate(PATH_URL.MANAGER_EVENT.CREATE);\n  };\n\n  const onChangePagination = (currentPage, totalItemPerPage, _) => {\n    setPagination((curState) => ({\n      ...curState,\n      page: currentPage,\n      take: totalItemPerPage,\n    }));\n  };\n\n  const handleSearch = (keyWord) => {\n    setPagination((curState) => ({\n      ...curState,\n      page: 1,\n      keyword: keyWord?.trim(),\n    }));\n  };\n\n  const handleDelete = (events) => {\n    eventApi\n      .deleteEvent(events.id, 0)\n      .then(() => {\n        setRefetch(`deleteEvent-${events.id}`);\n        message.success(t(\"events.message.deleteSuccess\"));\n      })\n      .catch(() => {\n        if (\n          validateDateStatus(events?.startDate, events?.endDate) ===\n          \"Inprogress\"\n        ) {\n          message.error(t(\"events.message.deleteInprogressErr\"));\n        } else {\n          message.error(t(\"events.message.deleteInprogressErr\"));\n        }\n      });\n  };\n\n  const handleHidden = (eventId) => {\n    eventApi\n      .deleteEvent(eventId, 1)\n      .then(() => {\n        setRefetch(`deleteEvent-${eventId}`);\n        message.success(t(\"events.message.hiddenSuccess\"));\n      })\n      .catch(() => {\n        message.error(t(\"events.message.hiddenError\"));\n      });\n  };\n\n  const handleClickRow = (evtData) => {\n    navigate(PATH_URL.MANAGER_EVENT.DETAIL, { state: evtData });\n  };\n\n  const confirmDelete = (events) => {\n    Modal.confirm({\n      icon: <ExclamationCircleOutlined />,\n      centered: true,\n      content: t(\"events.modal.textConfirmDel\"),\n      okText: t(\"events.modal.textYes\"),\n      cancelText: t(\"events.modal.textNo\"),\n      onOk: () => handleDelete(events),\n    });\n  };\n\n  const confirmHidden = (eventId) => {\n    Modal.confirm({\n      icon: <ExclamationCircleOutlined />,\n      centered: true,\n      content: t(\"events.modal.textConfirmHidden\"),\n      okText: t(\"events.modal.textYes\"),\n      cancelText: t(\"events.modal.textNo\"),\n      onOk: () => handleHidden(eventId),\n    });\n  };\n\n  const totalPage = value?.paginate?.totalPage;\n  const paginationProp = {\n    position: [\"bottomRight\"],\n    total: totalPage * 10,\n    showSizeChanger: true,\n    onChange: onChangePagination,\n    current: pagination.page,\n  };\n\n  const columns = [\n    {\n      title: \"ID\",\n      dataIndex: \"id\",\n      width: \"80px\",\n      align: \"center\",\n    },\n    {\n      title: t(\"events.list.nameEvent\"),\n      dataIndex: \"title\",\n      width: \"200px\",\n      align: \"center\",\n    },\n    {\n      title: t(\"events.list.type\"),\n      dataIndex: \"type\",\n      width: \"200px\",\n      align: \"center\",\n      filteredValue: pagination.typeEvent,\n      render: (type) => <span>{TYPE_EVENT[type]?.label}</span>,\n      filterDropdown: (props) => (\n        <FilterDropdown\n          field=\"typeEvent\"\n          items={TYPE_EVENT}\n          onSetPagination={setPagination}\n          {...props}\n        />\n      ),\n    },\n    {\n      title: t(\"events.list.dateStartEvent\"),\n      dataIndex: \"startDate\",\n      width: \"350px\",\n      align: \"center\",\n      render: (startDate) => (\n        <span>{dayjs(startDate).format(DATE_TIME_FORMAT_MINUTE)}</span>\n      ),\n    },\n    {\n      title: t(\"events.list.position\"),\n      dataIndex: \"place\",\n      width: \"200px\",\n      align: \"center\",\n    },\n    {\n      title: t(\"events.list.runningDistance\"),\n      dataIndex: \"totalDistance\",\n      width: \"200px\",\n      align: \"center\",\n      render: (totalDistance) => <span>{totalDistance || \"---\"}</span>,\n    },\n    {\n      title: t(\"events.list.level\"),\n      dataIndex: \"newLevel\",\n      width: \"200px\",\n      align: \"center\",\n      render: (newLevel) => <span>{newLevel?.name}</span>,\n    },\n    {\n      title: t(\"events.list.nameRoute\"),\n      dataIndex: \"courses\",\n      width: \"200px\",\n      align: \"center\",\n      render: (courses) => (\n        <div>\n          {courses?.map((course, i) => (\n            <Tag key={i}>{course.title}</Tag>\n          ))}\n        </div>\n      ),\n    },\n    {\n      title: t(\"events.list.dateEndEvent\"),\n      dataIndex: \"endDate\",\n      align: \"center\",\n      width: \"350px\",\n      render: (endDate) => (\n        <span>{endDate && formatDateTimeTable(endDate)}</span>\n      ),\n    },\n    {\n      title: t(\"events.list.status\"),\n      align: \"center\",\n      width: \"200px\",\n      filteredValue: pagination.status,\n      filterDropdown: (props) => (\n        <FilterDropdown\n          field=\"status\"\n          onSetPagination={setPagination}\n          items={STATUS_EVENT}\n          {...props}\n        />\n      ),\n      render: (eventData) => {\n        return (\n          <span>\n            {eventData?.startDate &&\n              STATUS_DATE_EVENT[\n                validateDateStatus(eventData?.startDate, eventData?.endDate)\n              ]}\n          </span>\n        );\n      },\n    },\n    {\n      title: t(\"events.form.operation\"),\n      align: \"center\",\n      width: 300,\n      render: (events) => (\n        <>\n          <Button\n            type=\"primary\"\n            onClick={(e) => {\n              e.stopPropagation();\n              navigate(PATH_URL.MANAGER_EVENT.USER_JOIN, {\n                state: events,\n              });\n            }}\n          >\n            {t(\"events.list.btnUserInfoJoin\")}\n          </Button>\n          <Button\n            className=\"btn submit-btn ml-10\"\n            type=\"primary\"\n            disabled={!events?.status}\n            onClick={(e) => {\n              e.stopPropagation();\n              if (e.target.innerText !== t(\"events.list.hidden\")) {\n                confirmDelete(events);\n              } else {\n                confirmHidden(events.id);\n              }\n            }}\n          >\n            {validateDateStatus(events?.startDate, events?.endDate) ===\n            \"Prepare\"\n              ? t(\"table.btnDel\")\n              : t(\"events.list.hidden\")}\n          </Button>\n        </>\n      ),\n    },\n  ];\n\n  return (\n    <ComTable\n      title={t(\"events.tableTitle\")}\n      loading={loading}\n      columns={columns}\n      maxWidth={2000}\n      data={value?.data || []}\n      pagination={paginationProp}\n      onAddTable={handleCreate}\n      onSearch={handleSearch}\n      onClickRow={handleClickRow}\n    />\n  );\n}\n\nEventList.propTypes = {};\n\nexport default EventList;\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}